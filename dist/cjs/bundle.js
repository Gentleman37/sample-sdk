"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var http=require("http"),https=require("https"),url=require("url"),stream=require("stream"),assert=require("assert"),debug$1=require("debug"),zlib=require("zlib"),crypto=require("crypto");function _interopDefaultLegacy(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var http__default=_interopDefaultLegacy(http),https__default=_interopDefaultLegacy(https),url__default=_interopDefaultLegacy(url),stream__default=_interopDefaultLegacy(stream),assert__default=_interopDefaultLegacy(assert),debug__default=_interopDefaultLegacy(debug$1),zlib__default=_interopDefaultLegacy(zlib),crypto__default=_interopDefaultLegacy(crypto),bind=function(r,s){return function(){for(var e=new Array(arguments.length),t=0;t<e.length;t++)e[t]=arguments[t];return r.apply(s,e)}},toString=Object.prototype.toString;function isArray(e){return"[object Array]"===toString.call(e)}function isUndefined(e){return void 0===e}function isBuffer(e){return null!==e&&!isUndefined(e)&&null!==e.constructor&&!isUndefined(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}function isArrayBuffer(e){return"[object ArrayBuffer]"===toString.call(e)}function isFormData(e){return"undefined"!=typeof FormData&&e instanceof FormData}function isArrayBufferView(e){e="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer;return e}function isString(e){return"string"==typeof e}function isNumber(e){return"number"==typeof e}function isObject(e){return null!==e&&"object"==typeof e}function isPlainObject(e){if("[object Object]"!==toString.call(e))return!1;e=Object.getPrototypeOf(e);return null===e||e===Object.prototype}function isDate(e){return"[object Date]"===toString.call(e)}function isFile(e){return"[object File]"===toString.call(e)}function isBlob(e){return"[object Blob]"===toString.call(e)}function isFunction(e){return"[object Function]"===toString.call(e)}function isStream(e){return isObject(e)&&isFunction(e.pipe)}function isURLSearchParams(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams}function trim(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}function isStandardBrowserEnv(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)}function forEach(e,t){if(null!=e)if(isArray(e="object"!=typeof e?[e]:e))for(var r=0,s=e.length;r<s;r++)t.call(null,e[r],r,e);else for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.call(null,e[i],i,e)}function merge(){var r={};function e(e,t){isPlainObject(r[t])&&isPlainObject(e)?r[t]=merge(r[t],e):isPlainObject(e)?r[t]=merge({},e):isArray(e)?r[t]=e.slice():r[t]=e}for(var t=0,s=arguments.length;t<s;t++)forEach(arguments[t],e);return r}function extend(r,e,s){return forEach(e,function(e,t){r[t]=s&&"function"==typeof e?bind(e,s):e}),r}function stripBOM(e){return e=65279===e.charCodeAt(0)?e.slice(1):e}var utils={isArray:isArray,isArrayBuffer:isArrayBuffer,isBuffer:isBuffer,isFormData:isFormData,isArrayBufferView:isArrayBufferView,isString:isString,isNumber:isNumber,isObject:isObject,isPlainObject:isPlainObject,isUndefined:isUndefined,isDate:isDate,isFile:isFile,isBlob:isBlob,isFunction:isFunction,isStream:isStream,isURLSearchParams:isURLSearchParams,isStandardBrowserEnv:isStandardBrowserEnv,forEach:forEach,merge:merge,extend:extend,trim:trim,stripBOM:stripBOM};function encode(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var buildURL=function(e,t,r){if(!t)return e;var s,r=r?r(t):utils.isURLSearchParams(t)?t.toString():(s=[],utils.forEach(t,function(e,t){null!=e&&(utils.isArray(e)?t+="[]":e=[e],utils.forEach(e,function(e){utils.isDate(e)?e=e.toISOString():utils.isObject(e)&&(e=JSON.stringify(e)),s.push(encode(t)+"="+encode(e))}))}),s.join("&"));return r&&(-1!==(t=e.indexOf("#"))&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+r),e};function InterceptorManager(){this.handlers=[]}InterceptorManager.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},InterceptorManager.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},InterceptorManager.prototype.forEach=function(t){utils.forEach(this.handlers,function(e){null!==e&&t(e)})};var debug,InterceptorManager_1=InterceptorManager,transformData=function(t,r,e){return utils.forEach(e,function(e){t=e(t,r)}),t},isCancel=function(e){return!(!e||!e.__CANCEL__)},normalizeHeaderName=function(r,s){utils.forEach(r,function(e,t){t!==s&&t.toUpperCase()===s.toUpperCase()&&(r[s]=e,delete r[t])})},enhanceError=function(e,t,r,s,i){return e.config=t,r&&(e.code=r),e.request=s,e.response=i,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e},createError=function(e,t,r,s,i){e=new Error(e);return enhanceError(e,t,r,s,i)},settle=function(e,t,r){var s=r.config.validateStatus;r.status&&s&&!s(r.status)?t(createError("Request failed with status code "+r.status,r.config,null,r.request,r)):e(r)},cookies=utils.isStandardBrowserEnv()?{write:function(e,t,r,s,i,n){var o=[];o.push(e+"="+encodeURIComponent(t)),utils.isNumber(r)&&o.push("expires="+new Date(r).toGMTString()),utils.isString(s)&&o.push("path="+s),utils.isString(i)&&o.push("domain="+i),!0===n&&o.push("secure"),document.cookie=o.join("; ")},read:function(e){e=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}},isAbsoluteURL=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)},combineURLs=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e},buildFullPath=function(e,t){return e&&!isAbsoluteURL(t)?combineURLs(e,t):t},ignoreDuplicateOf=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],parseHeaders=function(e){var t,r,s={};return e&&utils.forEach(e.split("\n"),function(e){r=e.indexOf(":"),t=utils.trim(e.substr(0,r)).toLowerCase(),r=utils.trim(e.substr(r+1)),t&&(s[t]&&0<=ignoreDuplicateOf.indexOf(t)||(s[t]="set-cookie"===t?(s[t]||[]).concat([r]):s[t]?s[t]+", "+r:r))}),s},isURLSameOrigin=utils.isStandardBrowserEnv()?function(){var t,r=/(msie|trident)/i.test(navigator.userAgent),s=document.createElement("a");function i(e){return r&&(s.setAttribute("href",e),e=s.href),s.setAttribute("href",e),{href:s.href,protocol:s.protocol?s.protocol.replace(/:$/,""):"",host:s.host,search:s.search?s.search.replace(/^\?/,""):"",hash:s.hash?s.hash.replace(/^#/,""):"",hostname:s.hostname,port:s.port,pathname:"/"===s.pathname.charAt(0)?s.pathname:"/"+s.pathname}}return t=i(window.location.href),function(e){e=utils.isString(e)?i(e):e;return e.protocol===t.protocol&&e.host===t.host}}():function(){return!0},xhr=function(a){return new Promise(function(t,r){var s=a.data,i=a.headers;utils.isFormData(s)&&delete i["Content-Type"];var e,n=new XMLHttpRequest;a.auth&&(e=a.auth.username||"",o=a.auth.password?unescape(encodeURIComponent(a.auth.password)):"",i.Authorization="Basic "+btoa(e+":"+o));var o=buildFullPath(a.baseURL,a.url);if(n.open(a.method.toUpperCase(),buildURL(o,a.params,a.paramsSerializer),!0),n.timeout=a.timeout,n.onreadystatechange=function(){var e;n&&4===n.readyState&&(0!==n.status||n.responseURL&&0===n.responseURL.indexOf("file:"))&&(e="getAllResponseHeaders"in n?parseHeaders(n.getAllResponseHeaders()):null,e={data:a.responseType&&"text"!==a.responseType?n.response:n.responseText,status:n.status,statusText:n.statusText,headers:e,config:a,request:n},settle(t,r,e),n=null)},n.onabort=function(){n&&(r(createError("Request aborted",a,"ECONNABORTED",n)),n=null)},n.onerror=function(){r(createError("Network Error",a,null,n)),n=null},n.ontimeout=function(){var e="timeout of "+a.timeout+"ms exceeded";a.timeoutErrorMessage&&(e=a.timeoutErrorMessage),r(createError(e,a,"ECONNABORTED",n)),n=null},!utils.isStandardBrowserEnv()||(o=(a.withCredentials||isURLSameOrigin(o))&&a.xsrfCookieName?cookies.read(a.xsrfCookieName):void 0)&&(i[a.xsrfHeaderName]=o),"setRequestHeader"in n&&utils.forEach(i,function(e,t){void 0===s&&"content-type"===t.toLowerCase()?delete i[t]:n.setRequestHeader(t,e)}),utils.isUndefined(a.withCredentials)||(n.withCredentials=!!a.withCredentials),a.responseType)try{n.responseType=a.responseType}catch(e){if("json"!==a.responseType)throw e}"function"==typeof a.onDownloadProgress&&n.addEventListener("progress",a.onDownloadProgress),"function"==typeof a.onUploadProgress&&n.upload&&n.upload.addEventListener("progress",a.onUploadProgress),a.cancelToken&&a.cancelToken.promise.then(function(e){n&&(n.abort(),r(e),n=null)}),s=s||null,n.send(s)})},debug_1=function(){if(!debug)try{debug=debug__default.default("follow-redirects")}catch(e){debug=function(){}}debug.apply(null,arguments)},URL=url__default.default.URL,Writable=stream__default.default.Writable,events=["abort","aborted","connect","error","socket","timeout"],eventHandlers=Object.create(null);events.forEach(function(s){eventHandlers[s]=function(e,t,r){this._redirectable.emit(s,e,t,r)}});var RedirectionError=createErrorType("ERR_FR_REDIRECTION_FAILURE",""),TooManyRedirectsError=createErrorType("ERR_FR_TOO_MANY_REDIRECTS","Maximum number of redirects exceeded"),MaxBodyLengthExceededError=createErrorType("ERR_FR_MAX_BODY_LENGTH_EXCEEDED","Request body larger than maxBodyLength limit"),WriteAfterEndError=createErrorType("ERR_STREAM_WRITE_AFTER_END","write after end");function RedirectableRequest(e,t){Writable.call(this),this._sanitizeOptions(e),this._options=e,this._ended=!1,this._ending=!1,this._redirectCount=0,this._redirects=[],this._requestBodyLength=0,this._requestBodyBuffers=[],t&&this.on("response",t);var r=this;this._onNativeResponse=function(e){r._processResponse(e)},this._performRequest()}function wrap(r){var n={maxRedirects:21,maxBodyLength:10485760},o={};return Object.keys(r).forEach(function(e){var i=e+":",t=o[i]=r[e],s=n[e]=Object.create(t);Object.defineProperties(s,{request:{value:function(t,e,r){if("string"==typeof t){var s=t;try{t=urlToOptions(new URL(s))}catch(e){t=url__default.default.parse(s)}}else t=URL&&t instanceof URL?urlToOptions(t):(r=e,e=t,{protocol:i});return"function"==typeof e&&(r=e,e=null),(e=Object.assign({maxRedirects:n.maxRedirects,maxBodyLength:n.maxBodyLength},t,e)).nativeProtocols=o,assert__default.default.equal(e.protocol,i,"protocol mismatch"),debug_1("options",e),new RedirectableRequest(e,r)},configurable:!0,enumerable:!0,writable:!0},get:{value:function(e,t,r){return(r=s.request(e,t,r)).end(),r},configurable:!0,enumerable:!0,writable:!0}})}),n}function noop(){}function urlToOptions(e){var t={protocol:e.protocol,hostname:e.hostname.startsWith("[")?e.hostname.slice(1,-1):e.hostname,hash:e.hash,search:e.search,pathname:e.pathname,path:e.pathname+e.search,href:e.href};return""!==e.port&&(t.port=Number(e.port)),t}function removeMatchingHeaders(e,t){var r,s;for(s in t)e.test(s)&&(r=t[s],delete t[s]);return r}function createErrorType(e,t){function r(e){Error.captureStackTrace(this,this.constructor),this.message=e||t}return((r.prototype=new Error).constructor=r).prototype.name="Error ["+e+"]",r.prototype.code=e,r}function abortRequest(e){for(var t=0;t<events.length;t++)e.removeListener(events[t],eventHandlers[events[t]]);e.on("error",noop),e.abort()}RedirectableRequest.prototype=Object.create(Writable.prototype),RedirectableRequest.prototype.abort=function(){abortRequest(this._currentRequest),this.emit("abort")},RedirectableRequest.prototype.write=function(e,t,r){if(this._ending)throw new WriteAfterEndError;if(!("string"==typeof e||"object"==typeof e&&"length"in e))throw new TypeError("data should be a string, Buffer or Uint8Array");"function"==typeof t&&(r=t,t=null),0!==e.length?this._requestBodyLength+e.length<=this._options.maxBodyLength?(this._requestBodyLength+=e.length,this._requestBodyBuffers.push({data:e,encoding:t}),this._currentRequest.write(e,t,r)):(this.emit("error",new MaxBodyLengthExceededError),this.abort()):r&&r()},RedirectableRequest.prototype.end=function(e,t,r){var s,i;"function"==typeof e?(r=e,e=t=null):"function"==typeof t&&(r=t,t=null),e?(i=(s=this)._currentRequest,this.write(e,t,function(){s._ended=!0,i.end(null,null,r)}),this._ending=!0):(this._ended=this._ending=!0,this._currentRequest.end(null,null,r))},RedirectableRequest.prototype.setHeader=function(e,t){this._options.headers[e]=t,this._currentRequest.setHeader(e,t)},RedirectableRequest.prototype.removeHeader=function(e){delete this._options.headers[e],this._currentRequest.removeHeader(e)},RedirectableRequest.prototype.setTimeout=function(t,e){var r=this;function s(e){e.setTimeout(t),e.removeListener("timeout",e.destroy),e.addListener("timeout",e.destroy)}function i(e){r._timeout&&clearTimeout(r._timeout),r._timeout=setTimeout(function(){r.emit("timeout"),n()},t),s(e)}function n(){clearTimeout(this._timeout),e&&r.removeListener("timeout",e),this.socket||r._currentRequest.removeListener("socket",i)}return e&&this.on("timeout",e),this.socket?i(this.socket):this._currentRequest.once("socket",i),this.on("socket",s),this.once("response",n),this.once("error",n),this},["flushHeaders","getHeader","setNoDelay","setSocketKeepAlive"].forEach(function(r){RedirectableRequest.prototype[r]=function(e,t){return this._currentRequest[r](e,t)}}),["aborted","connection","socket"].forEach(function(e){Object.defineProperty(RedirectableRequest.prototype,e,{get:function(){return this._currentRequest[e]}})}),RedirectableRequest.prototype._sanitizeOptions=function(e){var t;e.headers||(e.headers={}),e.host&&(e.hostname||(e.hostname=e.host),delete e.host),!e.pathname&&e.path&&((t=e.path.indexOf("?"))<0?e.pathname=e.path:(e.pathname=e.path.substring(0,t),e.search=e.path.substring(t)))},RedirectableRequest.prototype._performRequest=function(){var e,t=this._options.protocol,r=this._options.nativeProtocols[t];if(r){this._options.agents&&(e=t.substr(0,t.length-1),this._options.agent=this._options.agents[e]);var s=this._currentRequest=r.request(this._options,this._onNativeResponse);this._currentUrl=url__default.default.format(this._options),s._redirectable=this;for(var i,n,o,a=0;a<events.length;a++)s.on(events[a],eventHandlers[events[a]]);this._isRedirect&&(i=0,o=(n=this)._requestBodyBuffers,function e(t){s===n._currentRequest&&(t?n.emit("error",t):i<o.length?(t=o[i++],s.finished||s.write(t.data,t.encoding,e)):n._ended&&s.end())}())}else this.emit("error",new TypeError("Unsupported protocol "+t))},RedirectableRequest.prototype._processResponse=function(e){var t=e.statusCode;this._options.trackRedirects&&this._redirects.push({url:this._currentUrl,headers:e.headers,statusCode:t});var r=e.headers.location;if(r&&!1!==this._options.followRedirects&&300<=t&&t<400)if(abortRequest(this._currentRequest),e.destroy(),++this._redirectCount>this._options.maxRedirects)this.emit("error",new TooManyRedirectsError);else{(301!==t&&302!==t||"POST"!==this._options.method)&&(303!==t||/^(?:GET|HEAD)$/.test(this._options.method))||(this._options.method="GET",this._requestBodyBuffers=[],removeMatchingHeaders(/^content-/i,this._options.headers));t=removeMatchingHeaders(/^host$/i,this._options.headers)||url__default.default.parse(this._currentUrl).hostname,r=url__default.default.resolve(this._currentUrl,r);debug_1("redirecting to",r),this._isRedirect=!0;r=url__default.default.parse(r);if(Object.assign(this._options,r),r.hostname!==t&&removeMatchingHeaders(/^authorization$/i,this._options.headers),"function"==typeof this._options.beforeRedirect){var s={headers:e.headers};try{this._options.beforeRedirect.call(null,this._options,s)}catch(e){return void this.emit("error",e)}this._sanitizeOptions(this._options)}try{this._performRequest()}catch(e){s=new RedirectionError("Redirected request failed: "+e.message);s.cause=e,this.emit("error",s)}}else e.responseUrl=this._currentUrl,e.redirects=this._redirects,this.emit("response",e),this._requestBodyBuffers=[]};var followRedirects=wrap({http:http__default.default,https:https__default.default}),wrap_1=wrap;followRedirects.wrap=wrap_1;var name="axios",version="0.21.1",description="Promise based HTTP client for the browser and node.js",main="index.js",scripts={test:"grunt test && bundlesize",start:"node ./sandbox/server.js",build:"NODE_ENV=production grunt build",preversion:"npm test",version:"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json",postversion:"git push && git push --tags",examples:"node ./examples/server.js",coveralls:"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js",fix:"eslint --fix lib/**/*.js"},repository={type:"git",url:"https://github.com/axios/axios.git"},keywords=["xhr","http","ajax","promise","node"],author="Matt Zabriskie",license="MIT",bugs={url:"https://github.com/axios/axios/issues"},homepage="https://github.com/axios/axios",devDependencies={bundlesize:"^0.17.0",coveralls:"^3.0.0","es6-promise":"^4.2.4",grunt:"^1.0.2","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.1.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^20.1.0","grunt-karma":"^2.0.0","grunt-mocha-test":"^0.13.3","grunt-ts":"^6.0.0-beta.19","grunt-webpack":"^1.0.18","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1",karma:"^1.3.0","karma-chrome-launcher":"^2.2.0","karma-coverage":"^1.1.1","karma-firefox-launcher":"^1.1.0","karma-jasmine":"^1.1.1","karma-jasmine-ajax":"^0.1.13","karma-opera-launcher":"^1.0.0","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^1.2.0","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.7","karma-webpack":"^1.7.0","load-grunt-tasks":"^3.5.2",minimist:"^1.2.0",mocha:"^5.2.0",sinon:"^4.5.0",typescript:"^2.8.1","url-search-params":"^0.10.0",webpack:"^1.13.1","webpack-dev-server":"^1.14.1"},browser={"./lib/adapters/http.js":"./lib/adapters/xhr.js"},jsdelivr="dist/axios.min.js",unpkg="dist/axios.min.js",typings="./index.d.ts",dependencies={"follow-redirects":"^1.10.0"},bundlesize=[{path:"./dist/axios.min.js",threshold:"5kB"}],_package={name:name,version:version,description:description,main:main,scripts:scripts,repository:repository,keywords:keywords,author:author,license:license,bugs:bugs,homepage:homepage,devDependencies:devDependencies,browser:browser,jsdelivr:jsdelivr,unpkg:unpkg,typings:typings,dependencies:dependencies,bundlesize:bundlesize},_package$1=Object.freeze({__proto__:null,name:name,version:version,description:description,main:main,scripts:scripts,repository:repository,keywords:keywords,author:author,license:license,bugs:bugs,homepage:homepage,devDependencies:devDependencies,browser:browser,jsdelivr:jsdelivr,unpkg:unpkg,typings:typings,dependencies:dependencies,bundlesize:bundlesize,default:_package});function getCjsExportFromNamespace(e){return e&&e.default||e}var pkg=getCjsExportFromNamespace(_package$1),httpFollow=followRedirects.http,httpsFollow=followRedirects.https,isHttps=/https:?/;function setProxy(e,t,r){e.hostname=t.host,e.host=t.host,e.port=t.port,e.path=r,t.auth&&(r=Buffer.from(t.auth.username+":"+t.auth.password,"utf8").toString("base64"),e.headers["Proxy-Authorization"]="Basic "+r),e.beforeRedirect=function(e){e.headers.host=e.host,setProxy(e,t,e.href)}}var http_1=function(f){return new Promise(function(t,r){function n(e){t(e)}function o(e){r(e)}var e=f.data,s=f.headers;if(s["User-Agent"]||s["user-agent"]||(s["User-Agent"]="axios/"+pkg.version),e&&!utils.isStream(e)){if(!Buffer.isBuffer(e))if(utils.isArrayBuffer(e))e=Buffer.from(new Uint8Array(e));else{if(!utils.isString(e))return o(createError("Data after transformation must be a string, an ArrayBuffer, a Buffer, or a Stream",f));e=Buffer.from(e,"utf-8")}s["Content-Length"]=e.length}var i=void 0;f.auth&&(i=(f.auth.username||"")+":"+(f.auth.password||""));var a=buildFullPath(f.baseURL,f.url),c=url__default.default.parse(a),u=c.protocol||"http:";(i=!i&&c.auth?((h=c.auth.split(":"))[0]||"")+":"+(h[1]||""):i)&&delete s.Authorization;var d=isHttps.test(u),l=d?f.httpsAgent:f.httpAgent,a={path:buildURL(c.path,f.params,f.paramsSerializer).replace(/^\?/,""),method:f.method.toUpperCase(),headers:s,agent:l,agents:{http:f.httpAgent,https:f.httpsAgent},auth:i};f.socketPath?a.socketPath=f.socketPath:(a.hostname=c.hostname,a.port=c.port);var h=f.proxy;h||!1===h||(s=u.slice(0,-1)+"_proxy",(l=process.env[s]||process.env[s.toUpperCase()])&&(i=url__default.default.parse(l),s=!0,(s=(l=process.env.no_proxy||process.env.NO_PROXY)?!l.split(",").map(function(e){return e.trim()}).some(function(e){return!!e&&("*"===e||("."===e[0]&&c.hostname.substr(c.hostname.length-e.length)===e||c.hostname===e))}):s)&&(h={host:i.hostname,port:i.port,protocol:i.protocol},i.auth&&(i=i.auth.split(":"),h.auth={username:i[0],password:i[1]})))),h&&(a.headers.host=c.hostname+(c.port?":"+c.port:""),setProxy(a,h,u+"//"+c.hostname+(c.port?":"+c.port:"")+a.path));var h=d&&(!h||isHttps.test(h.protocol)),h=f.transport||(0===f.maxRedirects?(h?https__default:http__default).default:(f.maxRedirects&&(a.maxRedirects=f.maxRedirects),h?httpsFollow:httpFollow));-1<f.maxBodyLength&&(a.maxBodyLength=f.maxBodyLength);var p=h.request(a,function(e){if(!p.aborted){var t=e,r=e.req||p;if(204!==e.statusCode&&"HEAD"!==r.method&&!1!==f.decompress)switch(e.headers["content-encoding"]){case"gzip":case"compress":case"deflate":t=t.pipe(zlib__default.default.createUnzip()),delete e.headers["content-encoding"]}var s,i={status:e.statusCode,statusText:e.statusMessage,headers:e.headers,config:f,request:r};"stream"===f.responseType?(i.data=t,settle(n,o,i)):(s=[],t.on("data",function(e){s.push(e),-1<f.maxContentLength&&Buffer.concat(s).length>f.maxContentLength&&(t.destroy(),o(createError("maxContentLength size of "+f.maxContentLength+" exceeded",f,null,r)))}),t.on("error",function(e){p.aborted||o(enhanceError(e,f,null,r))}),t.on("end",function(){var e=Buffer.concat(s);"arraybuffer"!==f.responseType&&(e=e.toString(f.responseEncoding),f.responseEncoding&&"utf8"!==f.responseEncoding||(e=utils.stripBOM(e))),i.data=e,settle(n,o,i)}))}});p.on("error",function(e){p.aborted&&"ERR_FR_TOO_MANY_REDIRECTS"!==e.code||o(enhanceError(e,f,null,p))}),f.timeout&&p.setTimeout(f.timeout,function(){p.abort(),o(createError("timeout of "+f.timeout+"ms exceeded",f,"ECONNABORTED",p))}),f.cancelToken&&f.cancelToken.promise.then(function(e){p.aborted||(p.abort(),o(e))}),utils.isStream(e)?e.on("error",function(e){o(enhanceError(e,f,null,p))}).pipe(p):p.end(e)})},DEFAULT_CONTENT_TYPE={"Content-Type":"application/x-www-form-urlencoded"};function setContentTypeIfUnset(e,t){!utils.isUndefined(e)&&utils.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}function getDefaultAdapter(){var e;return"undefined"!=typeof XMLHttpRequest?e=xhr:"undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process)&&(e=http_1),e}var defaults={adapter:getDefaultAdapter(),transformRequest:[function(e,t){return normalizeHeaderName(t,"Accept"),normalizeHeaderName(t,"Content-Type"),utils.isFormData(e)||utils.isArrayBuffer(e)||utils.isBuffer(e)||utils.isStream(e)||utils.isFile(e)||utils.isBlob(e)?e:utils.isArrayBufferView(e)?e.buffer:utils.isURLSearchParams(e)?(setContentTypeIfUnset(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):utils.isObject(e)?(setContentTypeIfUnset(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return 200<=e&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};utils.forEach(["delete","get","head"],function(e){defaults.headers[e]={}}),utils.forEach(["post","put","patch"],function(e){defaults.headers[e]=utils.merge(DEFAULT_CONTENT_TYPE)});var defaults_1=defaults;function throwIfCancellationRequested(e){e.cancelToken&&e.cancelToken.throwIfRequested()}var dispatchRequest=function(t){return throwIfCancellationRequested(t),t.headers=t.headers||{},t.data=transformData(t.data,t.headers,t.transformRequest),t.headers=utils.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),utils.forEach(["delete","get","head","post","put","patch","common"],function(e){delete t.headers[e]}),(t.adapter||defaults_1.adapter)(t).then(function(e){return throwIfCancellationRequested(t),e.data=transformData(e.data,e.headers,t.transformResponse),e},function(e){return isCancel(e)||(throwIfCancellationRequested(t),e&&e.response&&(e.response.data=transformData(e.response.data,e.response.headers,t.transformResponse))),Promise.reject(e)})},mergeConfig=function(t,r){r=r||{};var s={},e=["url","method","data"],i=["headers","auth","proxy","params"],n=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],o=["validateStatus"];function a(e,t){return utils.isPlainObject(e)&&utils.isPlainObject(t)?utils.merge(e,t):utils.isPlainObject(t)?utils.merge({},t):utils.isArray(t)?t.slice():t}function c(e){utils.isUndefined(r[e])?utils.isUndefined(t[e])||(s[e]=a(void 0,t[e])):s[e]=a(t[e],r[e])}utils.forEach(e,function(e){utils.isUndefined(r[e])||(s[e]=a(void 0,r[e]))}),utils.forEach(i,c),utils.forEach(n,function(e){utils.isUndefined(r[e])?utils.isUndefined(t[e])||(s[e]=a(void 0,t[e])):s[e]=a(void 0,r[e])}),utils.forEach(o,function(e){e in r?s[e]=a(t[e],r[e]):e in t&&(s[e]=a(void 0,t[e]))});var u=e.concat(i).concat(n).concat(o),o=Object.keys(t).concat(Object.keys(r)).filter(function(e){return-1===u.indexOf(e)});return utils.forEach(o,c),s};function Axios(e){this.defaults=e,this.interceptors={request:new InterceptorManager_1,response:new InterceptorManager_1}}Axios.prototype.request=function(e){"string"==typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},(e=mergeConfig(this.defaults,e)).method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var t=[dispatchRequest,void 0],r=Promise.resolve(e);for(this.interceptors.request.forEach(function(e){t.unshift(e.fulfilled,e.rejected)}),this.interceptors.response.forEach(function(e){t.push(e.fulfilled,e.rejected)});t.length;)r=r.then(t.shift(),t.shift());return r},Axios.prototype.getUri=function(e){return e=mergeConfig(this.defaults,e),buildURL(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},utils.forEach(["delete","get","head","options"],function(r){Axios.prototype[r]=function(e,t){return this.request(mergeConfig(t||{},{method:r,url:e,data:(t||{}).data}))}}),utils.forEach(["post","put","patch"],function(s){Axios.prototype[s]=function(e,t,r){return this.request(mergeConfig(r||{},{method:s,url:e,data:t}))}});var Axios_1=Axios;function Cancel(e){this.message=e}Cancel.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},Cancel.prototype.__CANCEL__=!0;var Cancel_1=Cancel;function CancelToken(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise(function(e){t=e});var r=this;e(function(e){r.reason||(r.reason=new Cancel_1(e),t(r.reason))})}CancelToken.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},CancelToken.source=function(){var t;return{token:new CancelToken(function(e){t=e}),cancel:t}};var CancelToken_1=CancelToken,spread=function(t){return function(e){return t.apply(null,e)}},isAxiosError=function(e){return"object"==typeof e&&!0===e.isAxiosError};function createInstance(e){var t=new Axios_1(e),e=bind(Axios_1.prototype.request,t);return utils.extend(e,Axios_1.prototype,t),utils.extend(e,t),e}var axios$1=createInstance(defaults_1);axios$1.Axios=Axios_1,axios$1.create=function(e){return createInstance(mergeConfig(axios$1.defaults,e))},axios$1.Cancel=Cancel_1,axios$1.CancelToken=CancelToken_1,axios$1.isCancel=isCancel,axios$1.all=function(e){return Promise.all(e)},axios$1.spread=spread,axios$1.isAxiosError=isAxiosError;var axios_1=axios$1,default_1=axios$1;axios_1.default=default_1;var axios=axios_1;const rnds8Pool=new Uint8Array(256);let poolPtr=rnds8Pool.length;function rng(){return poolPtr>rnds8Pool.length-16&&(crypto__default.default.randomFillSync(rnds8Pool),poolPtr=0),rnds8Pool.slice(poolPtr,poolPtr+=16)}var REGEX=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function validate(e){return"string"==typeof e&&REGEX.test(e)}const byteToHex=[];for(let e=0;e<256;++e)byteToHex.push((e+256).toString(16).substr(1));function stringify(e,t=0){t=(byteToHex[e[t+0]]+byteToHex[e[t+1]]+byteToHex[e[t+2]]+byteToHex[e[t+3]]+"-"+byteToHex[e[t+4]]+byteToHex[e[t+5]]+"-"+byteToHex[e[t+6]]+byteToHex[e[t+7]]+"-"+byteToHex[e[t+8]]+byteToHex[e[t+9]]+"-"+byteToHex[e[t+10]]+byteToHex[e[t+11]]+byteToHex[e[t+12]]+byteToHex[e[t+13]]+byteToHex[e[t+14]]+byteToHex[e[t+15]]).toLowerCase();if(!validate(t))throw TypeError("Stringified UUID is invalid");return t}function v4(e,t,r){const s=(e=e||{}).random||(e.rng||rng)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,t){r=r||0;for(let e=0;e<16;++e)t[r+e]=s[e];return t}return stringify(s)}const BROWSER_ALIASES_MAP={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},BROWSER_MAP={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},PLATFORMS_MAP={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},OS_MAP={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},ENGINE_MAP={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"};class Utils{static getFirstMatch(e,t){e=t.match(e);return e&&0<e.length&&e[1]||""}static getSecondMatch(e,t){e=t.match(e);return e&&1<e.length&&e[2]||""}static matchAndReturnConst(e,t,r){if(e.test(t))return r}static getWindowsVersionName(e){switch(e){case"NT":return"NT";case"XP":return"XP";case"NT 5.0":return"2000";case"NT 5.1":return"XP";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}}static getMacOSVersionName(e){const t=e.split(".").splice(0,2).map(e=>parseInt(e,10)||0);if(t.push(0),10===t[0])switch(t[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}}static getAndroidVersionName(e){const t=e.split(".").splice(0,2).map(e=>parseInt(e,10)||0);if(t.push(0),!(1===t[0]&&t[1]<5))return 1===t[0]&&t[1]<6?"Cupcake":1===t[0]&&6<=t[1]?"Donut":2===t[0]&&t[1]<2?"Eclair":2===t[0]&&2===t[1]?"Froyo":2===t[0]&&2<t[1]?"Gingerbread":3===t[0]?"Honeycomb":4===t[0]&&t[1]<1?"Ice Cream Sandwich":4===t[0]&&t[1]<4?"Jelly Bean":4===t[0]&&4<=t[1]?"KitKat":5===t[0]?"Lollipop":6===t[0]?"Marshmallow":7===t[0]?"Nougat":8===t[0]?"Oreo":9===t[0]?"Pie":void 0}static getVersionPrecision(e){return e.split(".").length}static compareVersions(e,t,r=!1){var s=Utils.getVersionPrecision(e),i=Utils.getVersionPrecision(t);let n=Math.max(s,i),o=0;var a=Utils.map([e,t],e=>{var t=n-Utils.getVersionPrecision(e);const r=e+new Array(1+t).join(".0");return Utils.map(r.split("."),e=>new Array(20-e.length).join("0")+e).reverse()});for(r&&(o=n-Math.min(s,i)),--n;n>=o;){if(a[0][n]>a[1][n])return 1;if(a[0][n]===a[1][n]){if(n===o)return 0;--n}else if(a[0][n]<a[1][n])return-1}}static map(e,t){const r=[];let s;if(Array.prototype.map)return Array.prototype.map.call(e,t);for(s=0;s<e.length;s+=1)r.push(t(e[s]));return r}static find(e,t){let r;var s;if(Array.prototype.find)return Array.prototype.find.call(e,t);for(r=0,s=e.length;r<s;r+=1){var i=e[r];if(t(i,r))return i}}static assign(e,...t){const r=e;let s;var i;if(Object.assign)return Object.assign(e,...t);for(s=0,i=t.length;s<i;s+=1){const n=t[s];if("object"==typeof n&&null!==n){const o=Object.keys(n);o.forEach(e=>{r[e]=n[e]})}}return e}static getBrowserAlias(e){return BROWSER_ALIASES_MAP[e]}static getBrowserTypeByAlias(e){return BROWSER_MAP[e]||""}}const commonVersionIdentifier=/version\/(\d+(\.?_?\d+)+)/i,browsersList=[{test:[/googlebot/i],describe(e){const t={name:"Googlebot"};e=Utils.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,e)||Utils.getFirstMatch(commonVersionIdentifier,e);return e&&(t.version=e),t}},{test:[/opera/i],describe(e){const t={name:"Opera"};e=Utils.getFirstMatch(commonVersionIdentifier,e)||Utils.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,e);return e&&(t.version=e),t}},{test:[/opr\/|opios/i],describe(e){const t={name:"Opera"};e=Utils.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,e)||Utils.getFirstMatch(commonVersionIdentifier,e);return e&&(t.version=e),t}},{test:[/SamsungBrowser/i],describe(e){const t={name:"Samsung Internet for Android"};e=Utils.getFirstMatch(commonVersionIdentifier,e)||Utils.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return e&&(t.version=e),t}},{test:[/Whale/i],describe(e){const t={name:"NAVER Whale Browser"};e=Utils.getFirstMatch(commonVersionIdentifier,e)||Utils.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,e);return e&&(t.version=e),t}},{test:[/MZBrowser/i],describe(e){const t={name:"MZ Browser"};e=Utils.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,e)||Utils.getFirstMatch(commonVersionIdentifier,e);return e&&(t.version=e),t}},{test:[/focus/i],describe(e){const t={name:"Focus"};e=Utils.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,e)||Utils.getFirstMatch(commonVersionIdentifier,e);return e&&(t.version=e),t}},{test:[/swing/i],describe(e){const t={name:"Swing"};e=Utils.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,e)||Utils.getFirstMatch(commonVersionIdentifier,e);return e&&(t.version=e),t}},{test:[/coast/i],describe(e){const t={name:"Opera Coast"};e=Utils.getFirstMatch(commonVersionIdentifier,e)||Utils.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,e);return e&&(t.version=e),t}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe(e){const t={name:"Opera Touch"};e=Utils.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,e)||Utils.getFirstMatch(commonVersionIdentifier,e);return e&&(t.version=e),t}},{test:[/yabrowser/i],describe(e){const t={name:"Yandex Browser"};e=Utils.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,e)||Utils.getFirstMatch(commonVersionIdentifier,e);return e&&(t.version=e),t}},{test:[/ucbrowser/i],describe(e){const t={name:"UC Browser"};e=Utils.getFirstMatch(commonVersionIdentifier,e)||Utils.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return e&&(t.version=e),t}},{test:[/Maxthon|mxios/i],describe(e){const t={name:"Maxthon"};e=Utils.getFirstMatch(commonVersionIdentifier,e)||Utils.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,e);return e&&(t.version=e),t}},{test:[/epiphany/i],describe(e){const t={name:"Epiphany"};e=Utils.getFirstMatch(commonVersionIdentifier,e)||Utils.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,e);return e&&(t.version=e),t}},{test:[/puffin/i],describe(e){const t={name:"Puffin"};e=Utils.getFirstMatch(commonVersionIdentifier,e)||Utils.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,e);return e&&(t.version=e),t}},{test:[/sleipnir/i],describe(e){const t={name:"Sleipnir"};e=Utils.getFirstMatch(commonVersionIdentifier,e)||Utils.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,e);return e&&(t.version=e),t}},{test:[/k-meleon/i],describe(e){const t={name:"K-Meleon"};e=Utils.getFirstMatch(commonVersionIdentifier,e)||Utils.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,e);return e&&(t.version=e),t}},{test:[/micromessenger/i],describe(e){const t={name:"WeChat"};e=Utils.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,e)||Utils.getFirstMatch(commonVersionIdentifier,e);return e&&(t.version=e),t}},{test:[/qqbrowser/i],describe(e){const t={name:/qqbrowserlite/i.test(e)?"QQ Browser Lite":"QQ Browser"};e=Utils.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,e)||Utils.getFirstMatch(commonVersionIdentifier,e);return e&&(t.version=e),t}},{test:[/msie|trident/i],describe(e){const t={name:"Internet Explorer"};e=Utils.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,e);return e&&(t.version=e),t}},{test:[/\sedg\//i],describe(e){const t={name:"Microsoft Edge"};e=Utils.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,e);return e&&(t.version=e),t}},{test:[/edg([ea]|ios)/i],describe(e){const t={name:"Microsoft Edge"};e=Utils.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,e);return e&&(t.version=e),t}},{test:[/vivaldi/i],describe(e){const t={name:"Vivaldi"};e=Utils.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,e);return e&&(t.version=e),t}},{test:[/seamonkey/i],describe(e){const t={name:"SeaMonkey"};e=Utils.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,e);return e&&(t.version=e),t}},{test:[/sailfish/i],describe(e){const t={name:"Sailfish"};e=Utils.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,e);return e&&(t.version=e),t}},{test:[/silk/i],describe(e){const t={name:"Amazon Silk"};e=Utils.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,e);return e&&(t.version=e),t}},{test:[/phantom/i],describe(e){const t={name:"PhantomJS"};e=Utils.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,e);return e&&(t.version=e),t}},{test:[/slimerjs/i],describe(e){const t={name:"SlimerJS"};e=Utils.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,e);return e&&(t.version=e),t}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe(e){const t={name:"BlackBerry"};e=Utils.getFirstMatch(commonVersionIdentifier,e)||Utils.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,e);return e&&(t.version=e),t}},{test:[/(web|hpw)[o0]s/i],describe(e){const t={name:"WebOS Browser"};e=Utils.getFirstMatch(commonVersionIdentifier,e)||Utils.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,e);return e&&(t.version=e),t}},{test:[/bada/i],describe(e){const t={name:"Bada"};e=Utils.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,e);return e&&(t.version=e),t}},{test:[/tizen/i],describe(e){const t={name:"Tizen"};e=Utils.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,e)||Utils.getFirstMatch(commonVersionIdentifier,e);return e&&(t.version=e),t}},{test:[/qupzilla/i],describe(e){const t={name:"QupZilla"};e=Utils.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,e)||Utils.getFirstMatch(commonVersionIdentifier,e);return e&&(t.version=e),t}},{test:[/firefox|iceweasel|fxios/i],describe(e){const t={name:"Firefox"};e=Utils.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,e);return e&&(t.version=e),t}},{test:[/electron/i],describe(e){const t={name:"Electron"};e=Utils.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,e);return e&&(t.version=e),t}},{test:[/MiuiBrowser/i],describe(e){const t={name:"Miui"};e=Utils.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return e&&(t.version=e),t}},{test:[/chromium/i],describe(e){const t={name:"Chromium"};e=Utils.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,e)||Utils.getFirstMatch(commonVersionIdentifier,e);return e&&(t.version=e),t}},{test:[/chrome|crios|crmo/i],describe(e){const t={name:"Chrome"};e=Utils.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,e);return e&&(t.version=e),t}},{test:[/GSA/i],describe(e){const t={name:"Google Search"};e=Utils.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,e);return e&&(t.version=e),t}},{test(e){var t=!e.test(/like android/i),e=e.test(/android/i);return t&&e},describe(e){const t={name:"Android Browser"};e=Utils.getFirstMatch(commonVersionIdentifier,e);return e&&(t.version=e),t}},{test:[/playstation 4/i],describe(e){const t={name:"PlayStation 4"};e=Utils.getFirstMatch(commonVersionIdentifier,e);return e&&(t.version=e),t}},{test:[/safari|applewebkit/i],describe(e){const t={name:"Safari"};e=Utils.getFirstMatch(commonVersionIdentifier,e);return e&&(t.version=e),t}},{test:[/.*/i],describe(e){var t=-1!==e.search("\\(")?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:Utils.getFirstMatch(t,e),version:Utils.getSecondMatch(t,e)}}}];var osParsersList=[{test:[/Roku\/DVP/],describe(e){e=Utils.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,e);return{name:OS_MAP.Roku,version:e}}},{test:[/windows phone/i],describe(e){e=Utils.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,e);return{name:OS_MAP.WindowsPhone,version:e}}},{test:[/windows /i],describe(e){var t=Utils.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,e),e=Utils.getWindowsVersionName(t);return{name:OS_MAP.Windows,version:t,versionName:e}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe(e){const t={name:OS_MAP.iOS};e=Utils.getSecondMatch(/(Version\/)(\d[\d.]+)/,e);return e&&(t.version=e),t}},{test:[/macintosh/i],describe(e){var t=Utils.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,e).replace(/[_\s]/g,"."),e=Utils.getMacOSVersionName(t);const r={name:OS_MAP.MacOS,version:t};return e&&(r.versionName=e),r}},{test:[/(ipod|iphone|ipad)/i],describe(e){e=Utils.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,e).replace(/[_\s]/g,".");return{name:OS_MAP.iOS,version:e}}},{test(e){var t=!e.test(/like android/i),e=e.test(/android/i);return t&&e},describe(e){var t=Utils.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,e),e=Utils.getAndroidVersionName(t);const r={name:OS_MAP.Android,version:t};return e&&(r.versionName=e),r}},{test:[/(web|hpw)[o0]s/i],describe(e){e=Utils.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,e);const t={name:OS_MAP.WebOS};return e&&e.length&&(t.version=e),t}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe(e){e=Utils.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,e)||Utils.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,e)||Utils.getFirstMatch(/\bbb(\d+)/i,e);return{name:OS_MAP.BlackBerry,version:e}}},{test:[/bada/i],describe(e){e=Utils.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,e);return{name:OS_MAP.Bada,version:e}}},{test:[/tizen/i],describe(e){e=Utils.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,e);return{name:OS_MAP.Tizen,version:e}}},{test:[/linux/i],describe(){return{name:OS_MAP.Linux}}},{test:[/CrOS/],describe(){return{name:OS_MAP.ChromeOS}}},{test:[/PlayStation 4/],describe(e){e=Utils.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,e);return{name:OS_MAP.PlayStation4,version:e}}}],platformParsersList=[{test:[/googlebot/i],describe(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe(e){e=Utils.getFirstMatch(/(can-l01)/i,e)&&"Nova";const t={type:PLATFORMS_MAP.mobile,vendor:"Huawei"};return e&&(t.model=e),t}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe(){return{type:PLATFORMS_MAP.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe(){return{type:PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe(){return{type:PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe(){return{type:PLATFORMS_MAP.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe(){return{type:PLATFORMS_MAP.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe(){return{type:PLATFORMS_MAP.tablet}}},{test(e){var t=e.test(/ipod|iphone/i),e=e.test(/like (ipod|iphone)/i);return t&&!e},describe(e){e=Utils.getFirstMatch(/(ipod|iphone)/i,e);return{type:PLATFORMS_MAP.mobile,vendor:"Apple",model:e}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe(){return{type:PLATFORMS_MAP.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe(){return{type:PLATFORMS_MAP.mobile}}},{test(e){return"blackberry"===e.getBrowserName(!0)},describe(){return{type:PLATFORMS_MAP.mobile,vendor:"BlackBerry"}}},{test(e){return"bada"===e.getBrowserName(!0)},describe(){return{type:PLATFORMS_MAP.mobile}}},{test(e){return"windows phone"===e.getBrowserName()},describe(){return{type:PLATFORMS_MAP.mobile,vendor:"Microsoft"}}},{test(e){var t=Number(String(e.getOSVersion()).split(".")[0]);return"android"===e.getOSName(!0)&&3<=t},describe(){return{type:PLATFORMS_MAP.tablet}}},{test(e){return"android"===e.getOSName(!0)},describe(){return{type:PLATFORMS_MAP.mobile}}},{test(e){return"macos"===e.getOSName(!0)},describe(){return{type:PLATFORMS_MAP.desktop,vendor:"Apple"}}},{test(e){return"windows"===e.getOSName(!0)},describe(){return{type:PLATFORMS_MAP.desktop}}},{test(e){return"linux"===e.getOSName(!0)},describe(){return{type:PLATFORMS_MAP.desktop}}},{test(e){return"playstation 4"===e.getOSName(!0)},describe(){return{type:PLATFORMS_MAP.tv}}},{test(e){return"roku"===e.getOSName(!0)},describe(){return{type:PLATFORMS_MAP.tv}}}],enginesParsersList=[{test(e){return"microsoft edge"===e.getBrowserName(!0)},describe(e){if(/\sedg\//i.test(e))return{name:ENGINE_MAP.Blink};e=Utils.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,e);return{name:ENGINE_MAP.EdgeHTML,version:e}}},{test:[/trident/i],describe(e){const t={name:ENGINE_MAP.Trident};e=Utils.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,e);return e&&(t.version=e),t}},{test(e){return e.test(/presto/i)},describe(e){const t={name:ENGINE_MAP.Presto};e=Utils.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,e);return e&&(t.version=e),t}},{test(e){var t=e.test(/gecko/i),e=e.test(/like gecko/i);return t&&!e},describe(e){const t={name:ENGINE_MAP.Gecko};e=Utils.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,e);return e&&(t.version=e),t}},{test:[/(apple)?webkit\/537\.36/i],describe(){return{name:ENGINE_MAP.Blink}}},{test:[/(apple)?webkit/i],describe(e){const t={name:ENGINE_MAP.WebKit};e=Utils.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,e);return e&&(t.version=e),t}}];class Parser{constructor(e,t=!1){if(null==e||""===e)throw new Error("UserAgent parameter can't be empty");this._ua=e,this.parsedResult={},!0!==t&&this.parse()}getUA(){return this._ua}test(e){return e.test(this._ua)}parseBrowser(){this.parsedResult.browser={};const e=Utils.find(browsersList,e=>{if("function"==typeof e.test)return e.test(this);if(e.test instanceof Array)return e.test.some(e=>this.test(e));throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.browser=e.describe(this.getUA())),this.parsedResult.browser}getBrowser(){return this.parsedResult.browser||this.parseBrowser()}getBrowserName(e){return e?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""}getBrowserVersion(){return this.getBrowser().version}getOS(){return this.parsedResult.os||this.parseOS()}parseOS(){this.parsedResult.os={};const e=Utils.find(osParsersList,e=>{if("function"==typeof e.test)return e.test(this);if(e.test instanceof Array)return e.test.some(e=>this.test(e));throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.os=e.describe(this.getUA())),this.parsedResult.os}getOSName(e){var{name:t}=this.getOS();return e?String(t).toLowerCase()||"":t||""}getOSVersion(){return this.getOS().version}getPlatform(){return this.parsedResult.platform||this.parsePlatform()}getPlatformType(e=!1){var{type:t}=this.getPlatform();return e?String(t).toLowerCase()||"":t||""}parsePlatform(){this.parsedResult.platform={};const e=Utils.find(platformParsersList,e=>{if("function"==typeof e.test)return e.test(this);if(e.test instanceof Array)return e.test.some(e=>this.test(e));throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.platform=e.describe(this.getUA())),this.parsedResult.platform}getEngine(){return this.parsedResult.engine||this.parseEngine()}getEngineName(e){return e?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""}parseEngine(){this.parsedResult.engine={};const e=Utils.find(enginesParsersList,e=>{if("function"==typeof e.test)return e.test(this);if(e.test instanceof Array)return e.test.some(e=>this.test(e));throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.engine=e.describe(this.getUA())),this.parsedResult.engine}parse(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this}getResult(){return Utils.assign({},this.parsedResult)}satisfies(r){const s={};let i=0;const n={};let o=0;const e=Object.keys(r);if(e.forEach(e=>{var t=r[e];"string"==typeof t?(n[e]=t,o+=1):"object"==typeof t&&(s[e]=t,i+=1)}),0<i){var t=Object.keys(s),a=Utils.find(t,e=>this.isOS(e));if(a){a=this.satisfies(s[a]);if(void 0!==a)return a}t=Utils.find(t,e=>this.isPlatform(e));if(t){var c=this.satisfies(s[t]);if(void 0!==c)return c}}if(0<o){c=Object.keys(n),c=Utils.find(c,e=>this.isBrowser(e,!0));if(void 0!==c)return this.compareVersion(n[c])}}isBrowser(e,t=!1){var r=this.getBrowserName().toLowerCase();let s=e.toLowerCase();const i=Utils.getBrowserTypeByAlias(s);return t&&i&&(s=i.toLowerCase()),s===r}compareVersion(e){let t=[0],r=e,s=!1;var i=this.getBrowserVersion();if("string"==typeof i)return">"===e[0]||"<"===e[0]?(r=e.substr(1),"="===e[1]?(s=!0,r=e.substr(2)):t=[],">"===e[0]?t.push(1):t.push(-1)):"="===e[0]?r=e.substr(1):"~"===e[0]&&(s=!0,r=e.substr(1)),-1<t.indexOf(Utils.compareVersions(i,r,s))}isOS(e){return this.getOSName(!0)===String(e).toLowerCase()}isPlatform(e){return this.getPlatformType(!0)===String(e).toLowerCase()}isEngine(e){return this.getEngineName(!0)===String(e).toLowerCase()}is(e,t=!1){return this.isBrowser(e,t)||this.isOS(e)||this.isPlatform(e)}some(e=[]){return e.some(e=>this.is(e))}}class Bowser{static getParser(e,t=!1){if("string"!=typeof e)throw new Error("UserAgent should be a string");return new Parser(e,t)}static parse(e){return new Parser(e).getResult()}static get BROWSER_MAP(){return BROWSER_MAP}static get ENGINE_MAP(){return ENGINE_MAP}static get OS_MAP(){return OS_MAP}static get PLATFORMS_MAP(){return PLATFORMS_MAP}}const STORAGE_NAME="gentle_brw_id";var browserHandler={getBrowserId(){var e=localStorage.getItem(STORAGE_NAME);if(null!=e)return e;e=v4();return localStorage.setItem(STORAGE_NAME,e),e},getBrowserInfo(){var{userAgent:e,language:t}=window.navigator;return{...Bowser.parse(e),language:t}},getSessionId(){var e=sessionStorage.getItem(STORAGE_NAME);if(null!=e)return e;e=String((new Date).getTime());return sessionStorage.setItem(STORAGE_NAME,e),e},getGeolocation(){const{geolocation:e}=window.navigator;return e?new Promise((i,t)=>{e.getCurrentPosition(e=>{const{latitude:t,longitude:r}=e.coords;var s=t.toFixed(5),e=r.toFixed(5);i({latitude:s,longitude:e})},e=>{t(e),console.log(e)})}):Promise.resolve({latitude:null,longitude:null})}};class GentleSDK{baseUrl;browserId=null;browserInfo=null;sessionId=null;customerId=null;geolocation={latitude:null,longitude:null};events=[];constructor({baseUrl:e,customerId:t}){if("undefined"==typeof window)throw new Error("window is undefined!");this.baseUrl=e,this.browserId=browserHandler.getBrowserId(),this.browserInfo=browserHandler.getBrowserInfo(),this.sessionId=browserHandler.getSessionId(),browserHandler.getGeolocation().then(e=>this.geolocation=e).catch(e=>console.log(e)),void 0!==t&&(this.customerId=t)}getLogProperty(){var e=(new Date).getTime();return{sessionId:this.sessionId,browserId:this.browserId,customerId:this.customerId,browserInfo:this.browserInfo,geolocation:this.geolocation,clientTime:e}}getUserProperty(){return{browserId:this.browserId,browserInfo:this.browserInfo,customerId:this.customerId,sessionId:this.sessionId}}getEvents(){return this.events}resetEvents(){this.events=[]}updateUserId(e){return this.customerId=e,this.customerId}async updateGeolocation(){var e=await browserHandler.getGeolocation();return this.geolocation=e,this.geolocation}async track({endPoint:e,event:t}){var r=this.getLogProperty(),r={...t,...r};return this.events.push(r),await axios.post(`${this.baseUrl}${e}`,r)}}const createGentleInstance=({baseUrl:e,customerId:t})=>new GentleSDK({baseUrl:e,customerId:t});exports.createGentleInstance=createGentleInstance;
